package{	import app.Background;	import app.Logo;	import app.MenuButtonMain;	import app.NavigationFooterBar;	import app.NavigationMainBar;		import com.greensock.*;	import com.greensock.easing.*;	import com.greensock.events.LoaderEvent;	import com.greensock.loading.*;	import com.greensock.loading.display.*;		import fl.events.*;		import flash.display.*;	import flash.events.*;	import flash.text.*;
			public class main extends MovieClip	{		//Tiled baggrund		var tiledBg:BitmapData=new Tile(0,0);		var bg:Sprite = new Sprite();				//Bund sort baggrund		var line:Sprite = new Sprite();				//		public var _stageW:int;		private var _stageH:int;				//Loadermax object		var _loader:LoaderMax;		//SWFloader object til main		var _mainSWF:SWFLoader;				var bgMain:Background = new Background();				var _logo:MovieClip = new Logo();				var _loaderSprite:MovieClip = new LoaderSprite();		var _loaderBar:Sprite=new Sprite();										public function main()		{			OverwriteManager.init();			addEventListener(Event.ADDED_TO_STAGE, onAddedToStage, false, 0, true);			addEventListener("statusChanged", show);			addEventListener("statusChangedBack", hide);		}				private function init ():void{					createNavigation();		//stage.addEventListener(Event.RESIZE, handleStageResize);				//	createNavigation();								}		private function onAddedToStage(e:Event):void{			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;			var sh:int=stage.stageHeight;			var sw:int=stage.stageWidth;			_stageW=stage.stageWidth;			removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);			createMainBackground();			createMainAssets();			createMainLogo();						_loader = new LoaderMax({name:"mainQueue", onOpen:initHandler, onProgress:progressHandler, onComplete:completeHandler, noCache:true, dispose:false});			_mainSWF = new SWFLoader("main.swf", {name:"mainSWF"});								stage.addEventListener(Event.RESIZE, handleStageResize, false, 0, true);			//_stageW = Math.round(stage.stageWidth);			//_stageH = Math.round(stage.stageHeight);					//loadXML();			//onStageResize();									_loader.append( _mainSWF );			_loader.load();					}			private function initHandler(event:LoaderEvent):void {			addChild(_loaderSprite);			_loaderSprite.x=56;			_loaderSprite.y=stage.stageHeight-22;			_loaderSprite.tf.alpha=0;			_loaderSprite.gotoAndPlay("load");						_loaderBar.graphics.beginFill(0xFFFFFF,1);			_loaderBar.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			_loaderBar.graphics.endFill();			addChild(_loaderBar);			_loaderBar.scaleX=0;			TweenMax.to(_loaderSprite.tf,0.2, {alpha:1});			//loaderSquare.visible=true;											}				private function progressHandler(event:LoaderEvent):void {			var minLimit:uint=0.8;			var maxLimit:uint=1.0;						var range:uint=maxLimit-minLimit;						var  percentage1:uint = event.target.progress;		//	trace(percentage1);			var w1:int = _stageW*event.target.progress;						TweenMax.to(_loaderBar, 0.5, {width:w1});			_loaderSprite.tf.gotoAndPlay("play");					//	TweenMax.to(_loaderSprite.tf, 0,{alpha:(Math.random()*0.2)+0.8, repeat:-1});								//	_loaderBar.scaleX = 100;		//	_loaderBar.scaleX = event.target.progress;			//_loaderSprite.tf.alpha=0.5;		}				private function completeHandler(event:LoaderEvent):void {						TweenMax.to(_loaderBar, 0.5, {scaleX:0, delay:0.8, ease:Sine.easeOut});						TweenMax.to(_loaderSprite.tf, 0.1, {alpha:0, delay:0.5, ease:Sine.easeOut, onComplete:function(){					TweenMax.to(_loaderSprite, 0.1, {alpha:0, delay:0.2});			}});		//	TweenMax.to(_loaderBar, 2, {scaleX:0,delay:0.5, ease:Linear});			//TweenLite.to(loaderSquare,1,{alpha:0, ease:Expo.easeIn});			//createListeners();			gotoAndPlay(2);			init();		}						private function errorHandler(event:LoaderEvent):void {					}								private function createNavigation():void{						var appData:Array = ["Work", "About"];			var navBar:NavigationMainBar = new NavigationMainBar(appData);			addChild(navBar);						var appFooterData:Array = ["Client area", "Empty area", "Share site"]			var navFooterBar:NavigationFooterBar = new NavigationFooterBar(appFooterData);		//	navFooterBar.alpha=0;			addChild(navFooterBar);		//	TweenMax.to(navFooterBar,0.2,{alpha:1});							//Baggrund rollover			addChildAt(bgMain,2);										}		private function show(e:Event):void{			bgMain.gotoAndPlay(2);			bgMain.visible=true;								}		private function hide(e:Event):void{			bgMain.visible=false;			bgMain.gotoAndStop(1);								}				private function createMainLogo():void{			_logo.x=57;			_logo.y=31;			addChildAt(_logo,2);			//buttonMode=true;					}								private function createMainBackground():void{			bg.graphics.beginBitmapFill(tiledBg, null, true, false);			bg.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);			bg.graphics.endFill();			bg.alpha=0.3;			addChildAt(bg,0);					}		private function createMainAssets():void{						line.graphics.beginFill(0x000000,1);			line.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			line.graphics.endFill();			addChild(line);								}	//UTILITY: StageResize						private function handleStageResize(e:Event):void{			_stageW=stage.stageWidth;			_stageH=stage.stageHeight;						bg.graphics.clear()			bg.graphics.beginBitmapFill(tiledBg, null, true, false);			bg.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);			bg.graphics.endFill();						line.graphics.clear();			line.graphics.beginFill(0x000000,1);			line.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			line.graphics.endFill();						_loaderSprite.y=_stageH-30;						_loaderBar.graphics.clear();			_loaderBar.graphics.beginFill(0xFFFFFF,1);			_loaderBar.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			_loaderBar.graphics.endFill();			//_loaderBar.x=0;			//_loaderBar.y=_stageH-15;		}			}//class}//package