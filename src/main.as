package{	import app.Background;	import app.Logo;	import app.MenuButtonMain;	import app.NavigationFooterBar;	import app.NavigationMainBar;	//	import app.About:	//	import app.Work;		import com.greensock.*;	import com.greensock.easing.*;	import com.greensock.events.LoaderEvent;	import com.greensock.loading.*;	import com.greensock.loading.display.*;		import fl.events.*;		import flash.display.*;	import flash.events.*;	import flash.text.*;			public class main extends MovieClip	{		//Bg		var tiledBg:BitmapData=new Tile(0,0);		var bg:Sprite = new Sprite();		var bgMain:Background = new Background();		var _logo:MovieClip = new Logo();						private var _topNotches:Sprite;		private var _buttomNotches:Sprite;				//frame		var line:Sprite;						private var _stageW:int;		private var _stageH:int;		private var _isInit:Boolean = false;				//		private var _about:About;		//		private var _work:Work;				var _loader:LoaderMax;		var _mainSWF:SWFLoader;		var _loaderSprite:MovieClip = new LoaderSprite();		var _loaderBar:Sprite=new Sprite();						public function main(){						OverwriteManager.init();			addEventListener(Event.ADDED_TO_STAGE, onAddedToStage, false, 0, true);						addEventListener("statusChanged", show);			addEventListener("statusChangedBack", hide);					}				private function init ():void{						_isInit = true;			createNavigation();			//		createListeners();					createTopNotches();					createBottomNotches();			//		createAbout();			//		createWork();			//		createContact();			//		openingAnimation();					}				//============================================================================================================================				// LOADER HANDLER				//============================================================================================================================						private function initHandler(event:LoaderEvent):void {						addChild(_loaderSprite);			_loaderSprite.x=56;			_loaderSprite.y=stage.stageHeight-22;			_loaderSprite.tf.alpha=0;			_loaderSprite.gotoAndPlay("load");						_loaderBar.graphics.beginFill(0xFFFFFF,1);			_loaderBar.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			_loaderBar.graphics.endFill();			addChild(_loaderBar);			_loaderBar.scaleX=0;						TweenMax.to(_loaderSprite.tf,0.2, {alpha:1});			//loaderSquare.visible=true;					}				private function progressHandler(event:LoaderEvent):void {						var w1:int = _stageW*event.target.progress;			TweenMax.to(_loaderBar, 0.5, {width:w1});			_loaderSprite.tf.gotoAndPlay("play");					}				private function completeHandler(event:LoaderEvent):void {						TweenMax.to(_loaderBar, 0.5, {scaleX:0, delay:0.8, ease:Sine.easeOut});			TweenMax.to(_loaderSprite.tf, 0.1, {alpha:0, delay:0.5, ease:Sine.easeOut, onComplete:function(){				TweenMax.to(_loaderSprite, 0.1, {alpha:0, delay:0.2});			}});						gotoAndPlay(2);			init();					}						private function errorHandler(event:LoaderEvent):void {								}						//============================================================================================================================				// CREATORS				//============================================================================================================================						private function createNavigation():void{			addChild(bgMain);						var appData:Array = ["Work", "About"];			var navBar:NavigationMainBar = new NavigationMainBar(appData);			addChild(navBar);						var appFooterData:Array = ["Client area", "Empty area", "Share site"]			var navFooterBar:NavigationFooterBar = new NavigationFooterBar(appFooterData);			//	navFooterBar.alpha=0;			addChild(navFooterBar);			//	TweenMax.to(navFooterBar,0.2,{alpha:1});							//Baggrund rollover								}				private function createMainLogo():void{						_logo.x=57;			_logo.y=31;			stage.addChildAt(_logo,1);			//buttonMode=true;		}				private function createMainBackground():void{						bg.graphics.beginBitmapFill(tiledBg, null, true, false);			bg.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);			bg.graphics.endFill();			bg.alpha=0.3;			addChildAt(bg,0);		}				private function createMainAssets():void{							line = new Sprite();			line.graphics.beginFill(0x000000,1);			line.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			line.graphics.endFill();			stage.addChildAt(line,1);		}				private function createTopNotches():void{						_topNotches = new Sprite();			var g:Graphics = _topNotches.graphics;			g.beginFill(0x000000,1);		//	g.drawRect(20, 20, 10, 30);			g.drawRect(330, 0, 1, 2);			//g.drawRect(374, 0, 1, 3);			g.drawRect(730, 0, 1, 2);			g.endFill();			addChild(_topNotches);		}				private function createBottomNotches():void {						_buttomNotches = new Sprite();			var g2:Graphics = _buttomNotches.graphics;			g2.beginFill(0x000000, 1);			g2.drawRect(0, 500, 2, 1);		//	g2.drawRect(330, 25, 2, 4);			g2.endFill();			addChild(_buttomNotches);		}				private function createAbout():void {			//		_about = new About();			//		addChild(_about);			//		_about.visible=false;		}				private function createWork():void {			//		_work = new Work();			//		addChild(_work);			//		_work.visible = false;		}				//============================================================================================================================				// LISTENERS				//============================================================================================================================						private function onAddedToStage(e:Event):void{						stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;			stage.addEventListener(Event.RESIZE, handleStageResize, false, 0, true);						//		addEventListener("statusChanged", show);			//		addEventListener("statusChangedBack", hide);						removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);						_stageW = Math.round(stage.stageWidth);			_stageH = Math.round(stage.stageHeight);						createMainBackground();			createMainAssets();			createMainLogo();						_loader = new LoaderMax({name:"mainQueue", onOpen:initHandler, onProgress:progressHandler, onComplete:completeHandler, noCache:true, dispose:false});			_mainSWF = new SWFLoader("main.swf", {name:"mainSWF"});			_loader.append( _mainSWF );			_loader.load();						//loadXML();			//onStageResize();		}				private function handleStageResize(e:Event):void{						_stageW=stage.stageWidth;			_stageH=stage.stageHeight;						bg.graphics.clear()			bg.graphics.beginBitmapFill(tiledBg, null, true, false);			bg.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);			bg.graphics.endFill();						line.graphics.clear();			line.graphics.beginFill(0x000000,1);			line.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			line.graphics.endFill();						_loaderSprite.y=_stageH-30;						_loaderBar.graphics.clear();			_loaderBar.graphics.beginFill(0xFFFFFF,1);			_loaderBar.graphics.drawRect(0,stage.stageHeight-15,stage.stageWidth,15);			_loaderBar.graphics.endFill();			//_loaderBar.x=0;			//_loaderBar.y=_stageH-15;		}				private function show(e:Event):void{			bgMain.gotoAndPlay(2);			bgMain.visible=true;		}				private function hide(e:Event):void{			bgMain.visible=false;			bgMain.gotoAndStop(1);		}					}//class}//package